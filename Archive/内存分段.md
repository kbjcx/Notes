---
aliases: []
area: 操作系统
project: 
date: 2023-04-11 15:52
---
---
#### Description
程序是由若干的逻辑分段组成的, 包括代码分段, 数据分段, 栈分段和堆分段, 不同的段拥有不同的属性, 所以用分段的形式把这些段分离出来

![[Pasted image 20230411160011.png|500]]

分段机制下的虚拟地址由<font color="#0593A2">段选择子</font>和<font color="#0593A2">段内偏移</font>组成
- 段选择子: 
    - 段号: 用作「段表」的索引, 而「段表」里面存放着段的基地址, 段的界限和特权等级等, 可以通过基地址和段内偏移找到物理内存地址
    - 特权等标志位
- 段偏移量的值应该在 0 ~ 段界限之间
 
虚拟地址通过段表与物理地址进行映射, 分段机制将虚拟内存分为 4 个段, 每个段在段表中有一项, 就可以通过段表找到虚拟地址中每个段内地址对应的物理地址

![[Pasted image 20230411160817.png|500]]

分段的方法让程序本身只关注于虚拟地址, 而不用关心物理内存地址, 但它也会存在一些问题: 
1. [[内存碎片|外部内存碎片]]
2. [[内存交换]]效率低, 分段机制下需要将整个段的内存交换到磁盘上
---
#### Source
- [4.1 为什么要有虚拟内存？ | 小林coding](https://xiaolincoding.com/os/3_memory/vmem.html#%E5%86%85%E5%AD%98%E5%88%86%E6%AE%B5)