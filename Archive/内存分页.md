---
aliases: [Paging]
area: 操作系统
project: 
tag: TODO
date: 2023-04-11 17:20
---
---
#### Description
对于[[内存分段]]类说, 会出现外部内存碎片以及内存交换空间大的问题, 要解决这个问题就需要在交换内存时尽可能减少交换的数据, 这就需要用<font color="#0593A2">内存分页</font>来实现.

分页是把整个虚拟和物理内存空间分割成一段段固定大小的内存空间, 将其称为页 (Page), 对于 Linux 而言, 页的大小为 `4KB`

与内存分段一样, 分页机制也需要将虚拟地址与物理内存地址一一对应, 那么对于 32 位系统而言, 一个 4G 大小的内存, 假设分页大小为 `4KB` , 则需要分成 $2^{20}$ 个页, 由于每个页表项需要 4 个字节来存储, 那么就需要 `4MB` 的空间来存储一个页表. 对于不同的进程, 每个进程都需要存储一个页表, 那么就会极大地浪费系统的内存, 于是采用<font color="#0593A2">多级页表</font>的方式来减少页表的内存占用.

- 多级页表
对于上述内存而言, 如果将内存页表分为两级, 将一级页表分为 `1024` 个页表, 然后每个一级页表下再分为 `1024` 个二级页表
![[Pasted image 20230411211734.png]]
但是如果按照原来的方式分页的话, 那么一级页表就会多占据一级页表的内存大小, 当然, 这是建立在把所有的物理内存地址全部映射到一个进程的页表中, 但是根据[[局部性原理]], 对于一个进程而言吗, 一个进程使用的空间远远达不到整个内存大小, 因此对于一个进程而言, 如果一个一级页表还没有被使用到, 那么其下的二级页表就不会被创建

---
#### Source
