---
aliases: []
area: redis
project: 
date: 2023-08-01 11:37
tags: []
---
---
#### Content
由于 [[AOF持久化]]和 [[RDB持久化]]都有各自的优点和缺点，因此 Redis 在 4.0 版本推出了混合持久化方法
混合持久化工作在 AOF 持久化的 AOF 日志重写阶段，AOF 日志量较大时开启重写子进程，内存的数据以 RDB 格式写入 AOF 文件开头；而后将 AOF 重写缓冲区的数据增加到 AOF 文件结尾；在未发生 AOF 重写时依然将 Redis 命令添加到 AOF 文件末尾
这样的话在加载时先加载了 RDB 格式，加载速度快，再加载后面的 AOF 格式，记录数据在 AOF 重写发生之前数据，使得数据丢失的更少

##### 优点
1. 混合持久化结合了 RDB 和 AOF 持久化的优点，开头为 RDB 的格式，使得 Redis 可以更快的启动，同时结合 AOF 的优点，有减低了大量数据丢失的风险

##### 缺点
1. AOF 文件中添加了 RDB 格式的内容，使得 AOF 文件的可读性变差
2. 兼容性差，如果开启混合持久化，那么此混合持久化 AOF 文件，就无法兼容 Redis 4.0 之前的版本


---
