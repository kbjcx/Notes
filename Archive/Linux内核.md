---
aliases: []
area: 操作系统
project: 
date: 2023-06-16 17:07
tags: []
---
---
#### Description
##### 内核的能力
1. 管理进程, 线程, 决定哪个进程 or 线程使用 CPU, 即**<font color="#0593A2">进程调度</font>**
2. 管理内存, 决定内存的分配和回收, 即**<font color="#0593A2">内存管理</font>**
3. 管理硬件设备, 为进程和硬件设备提供通信能力, 即**<font color="#0593A2">硬件通信能力</font>**
4. **<font color="#0593A2">提供系统调用</font>**,  如果应用程序要运行更高权限运行的服务，那么就需要有系统调用，它是用户程序与操作系统之间的接口

##### Linux 的设计
> [!note] 设计理念
> 1. 多任务
> 2. 对称多处理
> 3. 可执行文件链接格式
> 4. 宏内核
###### 多任务
- 多任务意味着可以有多个任务同时执行，这里的「同时」可以是并发或并行：
    - 对于单核 CPU 时，可以让每个任务执行一小段时间，时间到就切换另外一个任务，从宏观角度看，一段时间内执行了多个任务，这被称为并发。
    - 对于多核 CPU 时，多个任务可以同时被不同核心的 CPU 同时执行，这被称为并行
###### 对称多处理
- 每个 CPU 的地位是相等的，对资源的使用权限也是相同的，多个 CPU 共享同一个内存，每个 CPU 都可以访问完整的内存和硬件资源
- 这个特点决定了 Linux 操作系统不会有某个 CPU 单独服务应用程序或内核程序，而是每个程序都可以被分配到任意一个 CPU 上被执行
###### 可执行文件链接格式
- ELF 把文件分成了一个个分段，每一个段都有自己的作用
- ELF 文件有两种索引，Program header table 中记录了「运行时」所需的段，而 Section header table 记录了二进制文件中各个「段的首地址」
- 执行 ELF 文件的时候，会通过「装载器」把 ELF 文件装载到内存里，CPU 读取内存中的指令和数据，于是程序就被执行起来了
###### 宏内核
- 宏内核的特征是系统内核的所有模块，比如进程调度、内存管理、文件系统、设备驱动等，都运行在内核态

> [!note]
> 与宏内核相反的是微内核，微内核架构的内核只保留最基本的能力，比如进程调度、虚拟机内存、中断等，把一些应用放到了用户空间，比如驱动程序、文件系统等。这样服务与服务之间是隔离的，单个服务出现故障或者完全攻击，也不会导致整个操作系统挂掉，提高了操作系统的稳定性和可靠性

> [!note] 
> 还有一种内核叫混合类型内核，它的架构有点像微内核，内核里面会有一个最小版本的内核，然后其他模块会在这个基础上搭建，然后实现的时候会跟宏内核类似，也就是把整个内核做成一个完整的程序，大部分服务都在内核中，这就像是宏内核的方式包裹着一个微内核


---
#### Source
