---
aliases: []
area: 分布式
project: 
date: 2023-08-05 15:53
tags: []
---
---
#### Content
分布式系统中的各个节点之间通过互相传递消息来协作，由于网络和节点不可靠，这些消息可能会丢失，为了解决消息丢失问题会让节点重复发送信息，这意味着消息可能会发送多次。这种重复传递消息的行为可能会产生灾难性的副作用

上述问题最常见的解决办法是使用幂等操作，幂等操作是指多次操作产生相同的结果，然而幂等操作会对系统进行严格的约束，保证每个操作都是幂等的代价是昂贵的。在大多数情况下可以通过消息的唯一标志符来避免重复执行。

按照消息传递和处理次数，有如下几种**消息传递语义**：
1. **最多一次：** 消息最多传递一次，消息可能丢失，但不会重复
2. **最少一次：** 系统保证每条消息至少会发送一次，消息不会丢失，但在有故障的情况下可能导致消息重复发送
3. **精确一次：** : 消息只会被精确传递一次，这种语义是人们实际想要的，有且仅有—次，消息不丢失不重复

> [!important] 
> 很多时候，我们关心的是消息被处理的次数，而不是消息被送达的次数。**精确一次** 难以实现，因为需要建立可靠的链路，就必须重复传递消息。于是通过尽可能**精确一次** 处理消息，然后通过忽略后续的消息来达到看起来**精确一次** 的效果


---
