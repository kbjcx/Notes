---
aliases: []
area: 分布式
project: 
date: 2023-08-05 16:15
tags: []
---
---
#### Content
分区分为垂直分区和水平分区

> [!attention] 
> 垂直分区和列相关，而一个表中的列是有限的，这就导致了垂直分区不能超过一定的限度，而水平分区则可以无限拆分。另外，表中数据以行为单位不断增长，而列的变动很少，因此, 水平分区更常见

#### 垂直分区
对表的列进行拆分，将某些列的整列数据拆分到特定的分区，并放入不同的表中。垂直分区减小了表的宽度，每个分区都包含了其中的列对应的所有行。垂直分区也被称为行拆分（RowSplimng），因为的每一行都按照其列进行拆分。例如，可以将不经常使用的列或者一个包含了大 text 类型或 BLOB 类型的列垂直分区，确保数据完整性的同时提高了访问性能。值得—提的是，列式数据库可以看作己经垂直分区的数据库

#### 水平分区
对表的行进行拆分，将不同的行放入不同的表中，所有在表中定义的列在每个分区中都能找到，所以表的特性依然得以保留

> [!tip]
> 在分布式系统领域，水平分区常称为**分片**

##### 水平分区算法
###### 范围分区
**范围分区**是指根据指定的关键字将数据集拆分为若干连续的范围，每个范围存储到一个单独的节点上。用来分区的关键字也叫分区键。
![[Pasted image 20230805162833.png]]

通常会选择额外的负载均衡节点或者系统中的一个节点来接收客户端请求，然后根据范围分区算法，确定请求应该重定向（路由）到哪个节点或哪几个节点


**优点：**
1. 实现相对简单
2. 能够对用来进行范围分区的关键字进行范围查询
3. 当使用分区键进行范围查询的范围较小且位于同一个节点时性能良好
4. 很容易通过修改范围边界增加或减少范围数据，能够简单有效地调整范围（重新分区）以平衡负载

**缺点：**
1. 无法利用分区键之外的其他关键字进行范围查询
2. 当查询的范围较大且位于多个节点时性能较差
3. 可能产生数据分布不均匀或请求流量不均的问题，导致某些数据的热点现象，从而某些节点的负载可能会很高

> [!important] 
> 范围分区适合需要实现范围查询的系统

###### 哈希分区
哈希分区的策略是将指定的关键字经过一个哈希函数的计算，根据计算得到的值来决定该数据集的分区

**优点：**
1. 数据的分布是随机的，分布相对均匀，能够在一定程度上避免热点问题

**缺点：**
1. 在不额外存储数据的情况下，

---
