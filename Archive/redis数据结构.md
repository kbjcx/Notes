---
aliases: []
area: redis
project: 
date: 2023-07-21 22:27
tags: []
---
---
#### Content
##### String
> [!info] String 类型底层数据结构实现主要是 int 和 [[简单动态字符串|SDS]]

##### 内部编码
1. **int**
    如果一个字符串对象保存的是整数值，并且这个整数值可以用 `long` 类型来表示，那么字符串对象会将整数值保存在字符串对象结构的 `ptr` 属性里面（将 `void*` 转换成 `long`），并将字符串对象的编码设置为 `int`
1. **embstr**
    如果字符串对象保存的是一个字符串，并且这个字符申的长度小于等于 32 字节（redis 2.+版本），那么字符串对象将使用一个简单动态字符串（SDS）来保存这个字符串，并将对象的编码设置为 `embstr`， `embstr` 编码是专门用于保存*短字符串*的一种优化编码方式
1. **raw**
    如果字符串对象保存的是一个字符串，并且这个字符串的长度大于 32 字节（redis 2.+版本），那么字符串对象将使用一个简单动态字符串（SDS）来保存这个字符串，并将对象的编码设置为 `raw`

---
