---
aliases: [虚拟地址]
area: 操作系统
project: 
tag: TODO
date: 2023-04-11 14:42
---
---
#### Description
- 直接使用物理内存的缺点
    1. 无法隔离正在运行的不同程序, 程序之间可以通过地址读写其他程序占用的内存, 安全性低
    2. 可用的内存受限于物理内存大小, 超过物理内存则会崩溃

于是操作系统为每个进程分配了虚拟内存, 通过 CPU 中的内存管理单元 (MMU)来实现虚拟内存到物理内存的映射
- 虚拟内存的优点: 
    1. 隔离各个进程, 防止进程之间的内存冲突
    2. 每个进程分配的可用虚拟内存空间都是整个物理内存空间大小, 并且进程会认为自己获得的是一片连续的地址

![[Pasted image 20230411154750.png|500]]
在进程需要访问虚拟内存对应的数据时, MMU 会将虚拟内存转换为物理内存, 这就需要操作系统能够将虚拟内存与物理内存一一对应起来. 假如采用每个字节映射的方式, 对于 32 位的系统而言, 每组映射就需要花费 32+32 bit 的内存来保存映射关系, 对于 4G 大小的内存而言就需要 $4\times (32+32)/8G=32G$ 的空间来存储映射关系, 这显然是不现实的, 因此一般采用[[内存分段]]或者内存分页的方式来管理虚拟内存和物理内存之间的关系.

---
#### Source
- [4.1 为什么要有虚拟内存？ | 小林coding](https://xiaolincoding.com/os/3_memory/vmem.html#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98)
- [什么是虚拟内存_哒嘎哇的博客-CSDN博客](https://blog.csdn.net/nssddwbzd/article/details/122833783)
- [Linux虚拟内存，你理解到位了吗？ - 知乎](https://zhuanlan.zhihu.com/p/382505676)